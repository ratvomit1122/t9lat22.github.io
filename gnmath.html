<!-- Bidvertiser2103482 -->
<!DOCTYPE html>
<html lang="en">
    <head>
        <base href="https://cdn.jsdelivr.net/gh/gn-math/gn-math-DONTDMCA@main/">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">
    <script type="text/javascript" src="//ads.adplunge.com/w/d3ee34cb-11dd-47da-a537-576ee1b8b11b.js" async defer></script><script>var wapTag = wapTag || {};wapTag.gdprShowConsentToolButton = false;</script><script type="text/javascript" src="//ads.adplunge.com/ata/adv/d3ee34cb-11dd-47da-a537-576ee1b8b11b.js" async defer></script>
    <script>
        window.addEventListener('beforeunload', function (event) {
            event.preventDefault();
            event.returnValue = '';
            return 'Are you sure you want to leave? Any unsaved changes will be lost.';
        });
    </script>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-WX5VS54ZDW"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'G-WX5VS54ZDW');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Games</title>
    <meta name="title" content="Games">
    <meta name="description" content="Play games online. Fast, free, no downloads.">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Games">
    <meta property="og:description" content="Play games online. Fast, free, no downloads.">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Games">
<meta name="ppck-ver" content="3a583f64da995abf422fabcf5da9644e" />
    <meta name="twitter:description" content="Play games online. Fast, free, no downloads.">
    <meta name="monetag" content="bb44d9f98c1988aa33c02a34ccc0ed1b">
    <style>
        :root {
            --primary: #8fdcff;
            --primary-hover: #6ecfff;
            --text: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.7);
            --bg: transparent;
            --surface: rgba(0, 0, 0, 0.3);
            --surface-hover: rgba(0, 0, 0, 0.5);
            --border: rgba(255, 255, 255, 0.15);
            --radius: 15px;
            --radius-lg: 100px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            overflow-x: hidden;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', system-ui, sans-serif;
            line-height: 1.6;
            background-image: url("space2.png");
            background-repeat: no-repeat;
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            color: var(--text);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body::-webkit-scrollbar {
            width: 0;
            height: 0;
        }

        /* Floating Search Header */
        header {
            position: fixed;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            width: 90%;
            max-width: 800px;
            background: transparent;
            backdrop-filter: none;
            box-shadow: none;
            padding: 0;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 0;
        }

        .search-container {
            display: flex;
            flex: 1;
            gap: 10px;
            align-items: center;
        }

        #searchBar {
            flex: 1;
            padding: 10px 20px;
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 15px;
            outline: none;
            transition: all 0.2s ease;
            text-align: center;
        }

        #searchBar::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        #searchBar:focus {
            border-color: #8fdcff;
            box-shadow: 0 0 18px rgba(140, 220, 255, 0.45);
        }

        #sortOptions, #filterOptions {
            padding: 10px 15px;
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 14px;
            cursor: pointer;
            outline: none;
            transition: all 0.2s ease;
            backdrop-filter: blur(10px);
            min-width: 100px;
        }

        #sortOptions:hover, #filterOptions:hover {
            border-color: #8fdcff;
            box-shadow: 0 0 18px rgba(140, 220, 255, 0.45);
        }

        #sortOptions option, #filterOptions option {
            background: rgba(0, 0, 0, 0.9);
            color: white;
        }

        main {
            margin: 0 auto;
            padding: 80px 20px 100px;
            max-width: 1400px;
        }

        /* Section Headers */
        details {
            margin-bottom: 20px;
        }

        summary {
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            color: white;
            padding: 10px 0;
            outline: none;
            list-style: none;
        }

        summary::-webkit-details-marker {
            display: none;
        }

        hr {
            border: none;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin: 20px 0;
        }

        /* Game Grid */
        #container, #featuredZones {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 25px;
            margin-top: 15px;
        }

        /* Zone Items - Styled as rounded buttons like second batch */
        .zone-item {
            background: transparent;
            border: none;
            border-radius: 100px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            box-shadow: none;
        }

        .zone-item:hover {
            transform: translateY(-3px);
        }

        .zone-item:hover::before {
            opacity: 0;
        }

        .zone-item::before {
            display: none;
        }

        .zone-item img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 100px;
            display: block;
            background: rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .zone-item:hover img {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border-radius: 50px;
            opacity: 0.8;
        }

        .zone-item button {
            display: none;
        }

        /* Zone Viewer Modal */
        #zoneViewer {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            display: none;
            flex-direction: column;
            animation: slideInUp 0.3s ease;
        }

        @keyframes slideInUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .zone-header {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .zone-title {
            flex: 1;
            min-width: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #zoneName {
            font-size: 1.25rem;
            font-weight: 700;
            margin: 0;
            color: white;
        }

        #zoneId {
            display: none;
        }

        #zoneAuthor {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: all 0.2s ease;
        }

        #zoneAuthor:hover {
            color: #8fdcff;
            text-decoration: underline;
        }

        .zone-controls {
            display: flex;
            gap: 10px;
        }

        .zone-controls button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s ease;
            backdrop-filter: blur(10px);
        }

        .zone-controls button:hover {
            background: rgba(140, 220, 255, 0.2);
            border-color: #8fdcff;
            transform: translateY(-2px);
        }

        #zoneFrame {
            flex-grow: 1;
            border: none;
            width: 100%;
            height: calc(100% - 70px);
            background: black;
        }

        /* Popup Overlay */
        #popupOverlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 20000;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .popup {
            background: rgba(0, 0, 0, 0.9);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            width: 100%;
            max-width: 520px;
            max-height: 80vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: slideInScale 0.3s ease;
        }

        @keyframes slideInScale {
            from { transform: scale(0.9) translateY(20px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }

        .popup-header {
            background: rgba(140, 220, 255, 0.1);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        #popupTitle {
            margin: 0;
            font-size: 1.25rem;
            font-weight: 700;
            color: #8fdcff;
        }

        #popupClose {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #popupClose:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        #popupBody {
            padding: 20px;
            overflow-y: auto;
            color: white;
        }

        #popupBody input[type="text"],
        #popupBody input[type="file"] {
            width: 100%;
            padding: 12px 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 15px;
            transition: all 0.2s ease;
            outline: none;
        }

        #popupBody input[type="text"]:focus,
        #popupBody input[type="file"]:focus {
            border-color: #8fdcff;
            box-shadow: 0 0 15px rgba(140, 220, 255, 0.3);
        }

        /* Footer */
        footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.5);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px;
            z-index: 100;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: #8fdcff;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.2s ease;
            padding: 8px 16px;
            border-radius: 15px;
            background: rgba(140, 220, 255, 0.1);
            border: 1px solid rgba(140, 220, 255, 0.2);
        }

        .footer-links a:hover {
            background: rgba(140, 220, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(140, 220, 255, 0.2);
        }

        /* Info Button */
        .info-button {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            transition: all 0.2s ease;
            color: white;
        }

        .info-button:hover {
            background: rgba(140, 220, 255, 0.2);
            transform: scale(1.1);
        }

        /* Tooltip */
        #tooltip {
            position: fixed;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 14px;
            font-family: sans-serif;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
            z-index: 100000;
            white-space: nowrap;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        #tooltip.show {
            opacity: 1;
        }

        /* Ad Zone Item */
        .ad-zone-item {
            background: rgba(255, 193, 7, 0.1);
            border: 2px solid rgba(255, 193, 7, 0.5);
            border-radius: 20px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
            cursor: default;
        }

        .ad-zone-item .ad-label {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(255, 193, 7, 0.9);
            color: #000;
            font-size: 12px;
            font-weight: 800;
            padding: 4px 10px;
            border-radius: 6px;
            z-index: 10;
            pointer-events: none;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .ad-zone-item .ad-content {
            width: 100%;
            aspect-ratio: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 100px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 10px;
            }

            .search-container {
                width: 100%;
                flex-wrap: wrap;
            }

            #searchBar {
                width: 100%;
            }

            #sortOptions, #filterOptions {
                flex: 1;
            }

            main {
                padding: 100px 15px 120px;
            }

            #container, #featuredZones {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 20px;
            }

            .zone-item img {
                width: 150px;
                height: 150px;
            }
        }

        @media (max-width: 480px) {
            #container, #featuredZones {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 15px;
            }

            .zone-item img {
                width: 120px;
                height: 120px;
            }

            .zone-controls {
                flex-wrap: wrap;
            }

            .zone-controls button {
                padding: 6px 12px;
                font-size: 12px;
            }
        }

        /* Zone Count */
        #zoneCount {
            margin: 0 0 15px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 600;
        }

        /* Settings Button */
        .settings-button {
            background: rgba(140, 220, 255, 0.2);
            color: white;
            border: 1px solid rgba(140, 220, 255, 0.3);
            padding: 12px 24px;
            font-size: 15px;
            font-weight: 600;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .settings-button:hover {
            background: rgba(140, 220, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(140, 220, 255, 0.3);
        }

        /* Control Buttons */
        .control-buttons {
            display: flex;
            gap: 10px;
        }

        .control-buttons button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            padding: 0;
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            transition: all 0.2s ease;
        }

        .control-buttons button:hover {
            background: rgba(140, 220, 255, 0.2);
            border-color: #8fdcff;
            transform: translateY(-2px);
        }

        .control-button img {
            width: 24px;
            height: 24px;
            transition: transform 0.4s ease;
            filter: brightness(0) invert(1);
        }

        .control-button:hover img {
            transform: rotate(40deg);
        }
    </style>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#8fdcff">
</head>
<body>
    <span id="tooltip"></span>
    
    <header>
        <div class="header-content">
            <div class="search-container">
                <input type="text" id="searchBar" placeholder="Search games..." oninput="filterZones()">
                <select id="sortOptions" onchange="sortZones()">
                    <option value="name">Name</option>
                    <option value="id">ID (Date)</option>
                    <option value="popular">Popular</option>
                </select>
                <select id="filterOptions" onchange="filterZones2()">
                    <option value="none">(SELECT TAG)</option>
                </select>
            </div>
        </div>
    </header>

<script type="text/javascript"> (wapTag.Init = window.wapTag.Init || []).push(function () { wAPITag.initStickyBanner("pw_49753"); }); </script>
    <main>
        <br>
        <details id="featuredZonesWrapper" open>
            <summary id="allZonesSummary" style="cursor: pointer;">Featured Games</summary>
            <div id="featuredZones" class="zone-container"></div>
        </details>
        <br><hr><br>
        <br>
        <details id="allZonesWrapper" open>
            <summary id="allSummary" style="cursor: pointer;">All Games</summary>
            <div id="container">Loading...</div>
        </details>
    </main>

    <div id="zoneViewer">
        <div class="zone-header">
            <div class="zone-title">
                <h2 id="zoneName">Game</h2>
                <button class="info-button" onclick="showZoneInfo()" title="Game Information">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="16" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                </button>
                <span id="zoneId" style="display: none;"></span>
                <a id="zoneAuthor" href="#" target="_blank">by Author</a>
            </div>
            <div class="zone-controls">
                <button onclick="fullscreenZone()">Fullscreen</button>
                <button onclick="aboutBlank()">Open in New Tab</button>
                <button onclick="downloadZone()">Download</button>
                <button onclick="closeZone()">Close</button>
            </div>
        </div>
        <iframe id="zoneFrame"></iframe>
    </div>

    <div id="popupOverlay">
        <div class="popup">
            <div class="popup-header">
                <h3 id="popupTitle">Title</h3>
                <button id="popupClose" onclick="closePopup()">×</button>
            </div>
            <div id="popupBody">
                Content will be here
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-links">
            <h3 style="color:white; position:fixed; bottom:0; left:7px; font-family: 'Courier New', Courier, monospace;">g@mes provided by gn-math</h3>
            <a href="javascript:saveData()">Export Data</a>
            <a href="#" onclick="document.getElementById('importData').click(); return false;">Import Data</a>
            <input type="file" id="importData" style="display: none;" onchange="loadData(event)">
                        <a href="test200.html">Old g@me page</a>
        </div>
    </footer>

    <script>
        const container = document.getElementById('container');
        const zoneViewer = document.getElementById('zoneViewer');
        let zoneFrame = document.getElementById('zoneFrame');
        const searchBar = document.getElementById('searchBar');
        const sortOptions = document.getElementById('sortOptions');
        const filterOptions = document.getElementById('filterOptions');
        const tooltip = document.getElementById('tooltip');
        
        const zonesurls = [
            "https://cdn.jsdelivr.net/%67%68/%67%6e%2d%6d%61%74%68/%61%73%73%65%74%73@%6d%61%69%6e/%7a%6f%6e%65%73%2e%6a%73%6f%6e",
            "https://cdn.jsdelivr.net/gh/gn-math/assets@latest/zones.json",
            "https://cdn.jsdelivr.net/gh/gn-math/assets@master/zones.json",
            "https://cdn.jsdelivr.net/gh/gn-math/assets/zones.json"
        ];
        let zonesURL = zonesurls[Math.floor(Math.random() * zonesurls.length)];
        const coverURL = "https://cdn.jsdelivr.net/gh/gn-math/covers@main";
        const htmlURL = "https://cdn.jsdelivr.net/gh/gn-math/html@main";
        let zones = [];
        let popularityData = {};
        const featuredContainer = document.getElementById('featuredZones');
        
        function toTitleCase(str) {
            return str.replace(/\w\S*/g, text => text.charAt(0).toUpperCase() + text.substring(1).toLowerCase());
        }
        
        async function listZones() {
            try {
                let sharesponse;
                let shajson;
                let sha;
                try {
                    sharesponse = await fetch("https://api.github.com/repos/gn-math/assets/commits?t=" + Date.now());
                } catch (error) {}
                if (sharesponse && sharesponse.status === 200) {
                    try {
                        shajson = await sharesponse.json();
                        sha = shajson[0]['sha'];
                        if (sha) {
                            zonesURL = `https://cdn.jsdelivr.net/gh/gn-math/assets@${sha}/zones.json`;
                        }
                    } catch (error) {
                        try {
                            let secondarysharesponse = await fetch("https://raw.githubusercontent.com/gn-math/xml/refs/heads/main/sha.txt?t=" + Date.now());
                            if (secondarysharesponse && secondarysharesponse.status === 200) {
                                sha = (await secondarysharesponse.text()).trim();
                                if (sha) {
                                    zonesURL = `https://cdn.jsdelivr.net/gh/gn-math/assets@${sha}/zones.json`;
                                }
                            }
                        } catch(error) {}
                    }
                }
                const response = await fetch(zonesURL + "?t=" + Date.now());
                const json = await response.json();
                zones = json;
                zones[0].featured = true;
                await fetchPopularity();
                sortZones();
                const search = new URLSearchParams(window.location.search);
                const id = search.get('id');
                const embed = window.location.hash.includes("embed");
                if (id) {
                    const zone = zones.find(zone => zone.id + '' == id + '');
                    if (zone) {
                        if (embed) {
                            if (zone.url.startsWith("http")) {
                                window.open(zone.url, "_blank");
                            } else {
                                const url = zone.url.replace("{COVER_URL}", coverURL).replace("{HTML_URL}", htmlURL);
                                fetch(url + "?t=" + Date.now()).then(response => response.text()).then(html => {
                                    document.documentElement.innerHTML = html;
                                    const popup = document.createElement("div");
                                    popup.style.position = "fixed";
                                    popup.style.bottom = "20px";
                                    popup.style.right = "20px";
                                    popup.style.backgroundColor = "#cce5ff";
                                    popup.style.color = "#004085";
                                    popup.style.padding = "10px";
                                    popup.style.border = "1px solid #b8daff";
                                    popup.style.borderRadius = "5px";
                                    popup.style.boxShadow = "0px 0px 10px rgba(0,0,0,0.1)";
                                    popup.style.fontFamily = "Arial, sans-serif";
                                    popup.innerHTML = `Play more games online!`;
                                    const closeBtn = document.createElement("button");
                                    closeBtn.innerText = "×";
                                    closeBtn.style.marginLeft = "10px";
                                    closeBtn.style.background = "none";
                                    closeBtn.style.border = "none";
                                    closeBtn.style.cursor = "pointer";
                                    closeBtn.style.color = "#004085";
                                    closeBtn.style.fontWeight = "bold";
                                    closeBtn.onclick = () => popup.remove();
                                    popup.appendChild(closeBtn);
                                    document.body.appendChild(popup);
                                    document.documentElement.querySelectorAll('script').forEach(oldScript => {
                                        const newScript = document.createElement('script');
                                        if (oldScript.src) {
                                            newScript.src = oldScript.src;
                                        } else {
                                            newScript.textContent = oldScript.textContent;
                                        }
                                        document.body.appendChild(newScript);
                                    });
                                }).catch(error => alert("Failed to load zone: " + error));
                            }
                        } else {
                            openZone(zone);
                        }
                    }
                }

                let alltags = [];
                for (const obj of json) {
                    if (Array.isArray(obj.special)) {
                        alltags.push(...obj.special);
                    }
                }

                alltags = [...new Set(alltags)];
                let filteroption = document.getElementById("filterOptions");
                if (filteroption && filteroption.children.length > 1) {
                    while (filteroption.children.length > 1) {
                        filteroption.removeChild(filteroption.lastElementChild);
                    }
                }
                for (const tag of alltags) {
                    const opt = document.createElement("option");
                    opt.value = tag;
                    opt.textContent = toTitleCase(tag);
                    filteroption.appendChild(opt);
                }
            } catch (error) {
                console.error(error);
                container.innerHTML = `Error loading zones: ${error}`;
            }
        }
        
        async function fetchPopularity() {
            try {
                const response = await fetch("https://data.jsdelivr.com/v1/stats/packages/gh/gn-math/html@main/files?period=year");
                const data = await response.json();
                data.forEach(file => {
                    const idMatch = file.name.match(/\/(\d+)\.html$/);
                    if (idMatch) {
                        const id = parseInt(idMatch[1]);
                        popularityData[id] = file.hits.total;
                    }
                });
            } catch (error) {
                popularityData[0] = 0;
            }
        }

        function sortZones() {
            const sortBy = sortOptions.value;
            if (sortBy === 'name') {
                zones.sort((a, b) => a.name.localeCompare(b.name));
            } else if (sortBy === 'id') {
                zones.sort((a, b) => a.id - b.id);
            } else if (sortBy === 'popular') {
                zones.sort((a, b) => (popularityData[b.id] || 0) - (popularityData[a.id] || 0));
            }
            zones.sort((a, b) => (a.id === -1 ? -1 : b.id === -1 ? 1 : 0));
            if (featuredContainer.innerHTML === "") {
                const featured = zones.filter(z => z.featured);
                displayFeaturedZones(featured);
            }
            displayZones(zones);
        }

        function displayFeaturedZones(featuredZones) {
            featuredContainer.innerHTML = "";
            featuredZones.forEach((file, index) => {
                const zoneItem = document.createElement("div");
                zoneItem.className = "zone-item";
                zoneItem.onclick = () => openZone(file);
                
                const img = document.createElement("img");
                img.dataset.src = file.cover.replace("{COVER_URL}", coverURL).replace("{HTML_URL}", htmlURL);
                img.alt = file.name;
                img.loading = "lazy";
                img.className = "lazy-zone-img";
                
                // Tooltip events
                img.addEventListener('mouseenter', function(e) {
                    tooltip.textContent = file.name;
                    tooltip.classList.add('show');
                });
                img.addEventListener('mousemove', function(e) {
                    tooltip.style.left = e.clientX + 15 + 'px';
                    tooltip.style.top = e.clientY + 15 + 'px';
                });
                img.addEventListener('mouseleave', function() {
                    tooltip.classList.remove('show');
                });
                
                zoneItem.appendChild(img);
                
                const button = document.createElement("button");
                button.textContent = file.name;
                button.onclick = (event) => {
                    event.stopPropagation();
                    openZone(file);
                };
                zoneItem.appendChild(button);
                featuredContainer.appendChild(zoneItem);
            });
            if (featuredContainer.innerHTML === "") {
                featuredContainer.innerHTML = "No featured games found.";
            } else {
                document.getElementById("allZonesSummary").textContent = `Featured Games (${featuredZones.length})`;
            }

            const lazyImages = document.querySelectorAll('#featuredZones img.lazy-zone-img');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove("lazy-zone-img");
                        observer.unobserve(img);
                    }
                });
            }, {
                rootMargin: "100px",
                threshold: 0.1
            });

            lazyImages.forEach(img => {
                imageObserver.observe(img);
            });
        }
        
        function displayZones(zones) {
            container.innerHTML = "";

            zones.forEach((file, index) => {
                const zoneItem = document.createElement("div");
                zoneItem.className = "zone-item";
                zoneItem.onclick = () => openZone(file);

                const img = document.createElement("img");
                img.dataset.src = file.cover.replace("{COVER_URL}", coverURL).replace("{HTML_URL}", htmlURL);
                img.alt = file.name;
                img.loading = "lazy";
                img.className = "lazy-zone-img";
                
                // Tooltip events
                img.addEventListener('mouseenter', function(e) {
                    tooltip.textContent = file.name;
                    tooltip.classList.add('show');
                });
                img.addEventListener('mousemove', function(e) {
                    tooltip.style.left = e.clientX + 15 + 'px';
                    tooltip.style.top = e.clientY + 15 + 'px';
                });
                img.addEventListener('mouseleave', function() {
                    tooltip.classList.remove('show');
                });
                
                zoneItem.appendChild(img);

                const button = document.createElement("button");
                button.textContent = file.name;
                button.onclick = (e) => {
                    e.stopPropagation();
                    openZone(file);
                };
                zoneItem.appendChild(button);

                container.appendChild(zoneItem);
            });

            if (!zones.length) {
                container.textContent = "No games found.";
            } else {
                document.getElementById("allSummary").textContent = `All Games (${zones.length})`;
            }

            const lazyImages = document.querySelectorAll("img.lazy-zone-img");
            const observer = new IntersectionObserver((entries, obs) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove("lazy-zone-img");
                        obs.unobserve(img);
                    }
                });
            }, { rootMargin: "100px" });

            lazyImages.forEach(img => observer.observe(img));
        }

        function filterZones2() {
            const query = filterOptions.value;
            if (query === "none") {
                displayZones(zones);
            } else {
                const filteredZones = zones.filter(zone => zone.special?.includes(query));
                if (query.length !== 0) {
                    document.getElementById("featuredZonesWrapper").removeAttribute("open");
                }
                displayZones(filteredZones);
            }
        }

        function filterZones() {
            const query = searchBar.value.toLowerCase();
            const filteredZones = zones.filter(zone => zone.name.toLowerCase().includes(query));
            if (query.length !== 0) {
                document.getElementById("featuredZonesWrapper").removeAttribute("open");
            }
            displayZones(filteredZones);
        }

        function openZone(file) {
            if (file.url.startsWith("http")) {
                window.open(file.url, "_blank");
            } else {
                const url = file.url.replace("{COVER_URL}", coverURL).replace("{HTML_URL}", htmlURL);
                fetch(url + "?t=" + Date.now()).then(response => response.text()).then(html => {
                    if (zoneFrame.contentDocument === null) {
                        zoneFrame = document.createElement("iframe");
                        zoneFrame.id = "zoneFrame";
                        zoneViewer.appendChild(zoneFrame);
                    }
                    zoneFrame.contentDocument.open();
                    zoneFrame.contentDocument.write(html);
                    zoneFrame.contentDocument.close();
                    document.getElementById('zoneName').textContent = file.name;
                    document.getElementById('zoneId').textContent = file.id;
                    document.getElementById('zoneAuthor').textContent = "by " + file.author;
                    if (file.authorLink) {
                        document.getElementById('zoneAuthor').href = file.authorLink;
                    }
                    zoneViewer.style.display = "flex";
                    const url = new URL(window.location);
                    url.searchParams.set('id', file.id);
                    history.pushState(null, '', url.toString());
                }).catch(error => alert("Failed to load zone: " + error));
            }
        }

        function aboutBlank() {
            const newWindow = window.open("about:blank", "_blank");
            let zone = zones.find(zone => zone.id + '' === document.getElementById('zoneId').textContent).url.replace("{COVER_URL}", coverURL).replace("{HTML_URL}", htmlURL);
            fetch(zone + "?t=" + Date.now()).then(response => response.text()).then(html => {
                if (newWindow) {
                    newWindow.document.open();
                    newWindow.document.write(html);
                    newWindow.document.close();
                }
            })
        }

        function closeZone() {
            zoneViewer.style.display = "none";
            if (zoneFrame.parentNode) {
                zoneViewer.removeChild(zoneFrame);
            }
            const url = new URL(window.location);
            url.searchParams.delete('id');
            history.pushState(null, '', url.toString());
        }

        function downloadZone() {
            let zone = zones.find(zone => zone.id + '' === document.getElementById('zoneId').textContent);
            fetch(zone.url.replace("{HTML_URL}", htmlURL) + "?t=" + Date.now()).then(res => res.text()).then(text => {
                const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = zone.name + ".html";
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
        }

        function fullscreenZone() {
            if (zoneFrame.requestFullscreen) {
                zoneFrame.requestFullscreen();
            } else if (zoneFrame.mozRequestFullScreen) {
                zoneFrame.mozRequestFullScreen();
            } else if (zoneFrame.webkitRequestFullscreen) {
                zoneFrame.webkitRequestFullscreen();
            } else if (zoneFrame.msRequestFullscreen) {
                zoneFrame.msRequestFullscreen();
            }
        }

        function sanitizeData(obj, maxStringLen = 1000, maxArrayLen = 10000) {
            if (typeof obj === 'string') {
                return obj.length > maxStringLen ? obj.slice(0, maxStringLen) + '...[truncated]' : obj;
            }
            if (obj instanceof Uint8Array) {
                if (obj.length > maxArrayLen) {
                    return `[Uint8Array too large (${obj.length} bytes), truncated]`;
                }
                return obj;
            }
            if (Array.isArray(obj)) {
                return obj.map(item => sanitizeData(item, maxStringLen, maxArrayLen));
            }
            if (obj && typeof obj === 'object') {
                const newObj = {};
                for (const key in obj) {
                    if (obj.hasOwnProperty(key)) {
                        newObj[key] = sanitizeData(obj[key], maxStringLen, maxArrayLen);
                    }
                }
                return newObj;
            }
            return obj;
        }

        async function saveData() {
            alert("This might take a while, dont touch anything other than this OK button");
            const result = {};
            result.cookies = document.cookie;
            result.localStorage = {...localStorage};
            result.sessionStorage = {...sessionStorage};
            result.indexedDB = {};
            const dbs = await indexedDB.databases();
            for (const dbInfo of dbs) {
                if (!dbInfo.name) continue;
                result.indexedDB[dbInfo.name] = {};
                await new Promise((resolve, reject) => {
                    const openRequest = indexedDB.open(dbInfo.name, dbInfo.version);
                    openRequest.onerror = () => reject(openRequest.error);
                    openRequest.onsuccess = () => {
                        const db = openRequest.result;
                        const storeNames = Array.from(db.objectStoreNames);
                        if (storeNames.length === 0) {
                            resolve();
                            return;
                        }
                        const transaction = db.transaction(storeNames, "readonly");
                        const storePromises = [];
                        for (const storeName of storeNames) {
                            result.indexedDB[dbInfo.name][storeName] = [];
                            const store = transaction.objectStore(storeName);
                            const getAllRequest = store.getAll();
                            const p = new Promise((res, rej) => {
                                getAllRequest.onsuccess = () => {
                                    result.indexedDB[dbInfo.name][storeName] = sanitizeData(getAllRequest.result, 1000, 100);
                                    res();
                                };
                                getAllRequest.onerror = () => rej(getAllRequest.error);
                            });
                            storePromises.push(p);
                        }
                        Promise.all(storePromises).then(() => resolve());
                    };
                });
            }

            result.caches = {};
            const cacheNames = await caches.keys();
            for (const cacheName of cacheNames) {
                const cache = await caches.open(cacheName);
                const requests = await cache.keys();
                result.caches[cacheName] = [];
                for (const req of requests) {
                    const response = await cache.match(req);
                    if (!response) continue;
                    const cloned = response.clone();
                    const contentType = cloned.headers.get('content-type') || '';
                    let body;
                    try {
                        if (contentType.includes('application/json')) {
                            body = await cloned.json();
                        } else if (contentType.includes('text') || contentType.includes('javascript')) {
                            body = await cloned.text();
                        } else {
                            const buffer = await cloned.arrayBuffer();
                            body = btoa(String.fromCharCode(...new Uint8Array(buffer)));
                        }
                    } catch (e) {
                        body = '[Unable to read body]';
                    }
                    result.caches[cacheName].push({ url: req.url, body, contentType });
                }
            }
  
            alert("Done, wait for the download to come");
            const link = document.createElement("a");
            link.href = URL.createObjectURL(new Blob([JSON.stringify(result)], { type: "application/octet-stream" }));
            link.download = `${Date.now()}.data`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
  
        async function loadData(event) {
            const file = event.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = async function (e) {
                const data = JSON.parse(e.target.result);
                if (data.cookies) {
                    data.cookies.split(';').forEach(cookie => {
                        document.cookie = cookie.trim();
                    });
                }
                if (data.localStorage) {
                    for (const key in data.localStorage) {
                        localStorage.setItem(key, data.localStorage[key]);
                    }
                }
                if (data.sessionStorage) {
                    for (const key in data.sessionStorage) {
                        sessionStorage.setItem(key, data.sessionStorage[key]);
                    }
                }
                if (data.indexedDB) {
                    for (const dbName in data.indexedDB) {
                        const stores = data.indexedDB[dbName];
                        await new Promise((resolve, reject) => {
                            const request = indexedDB.open(dbName, 1);
                            request.onupgradeneeded = e => {
                                const db = e.target.result;
                                for (const storeName in stores) {
                                    if (!db.objectStoreNames.contains(storeName)) {
                                        db.createObjectStore(storeName, { keyPath: 'id', autoIncrement: true });
                                    }
                                }
                            };
                            request.onsuccess = e => {
                                const db = e.target.result;
                                const transaction = db.transaction(Object.keys(stores), 'readwrite');
                                transaction.onerror = () => reject(transaction.error);
                                let pendingStores = Object.keys(stores).length;
                                for (const storeName in stores) {
                                    const objectStore = transaction.objectStore(storeName);
                                    objectStore.clear().onsuccess = () => {
                                        for (const item of stores[storeName]) {
                                            objectStore.put(item);
                                        }
                                        pendingStores--;
                                        if (pendingStores === 0) resolve();
                                    };
                                }
                            };
                            request.onerror = () => reject(request.error);
                        });
                    }
                }
                if (data.caches) {
                    for (const cacheName in data.caches) {
                        const cache = await caches.open(cacheName);
                        await cache.keys().then(keys => Promise.all(keys.map(k => cache.delete(k))));
                        for (const entry of data.caches[cacheName]) {
                            let responseBody;
                            if (entry.contentType.includes('application/json')) {
                                responseBody = JSON.stringify(entry.body);
                            } else if (entry.contentType.includes('text') || entry.contentType.includes('javascript')) {
                                responseBody = entry.body;
                            } else {
                                const binaryStr = atob(entry.body);
                                const len = binaryStr.length;
                                const bytes = new Uint8Array(len);
                                for (let i = 0; i < len; i++) {
                                    bytes[i] = binaryStr.charCodeAt(i);
                                }
                                responseBody = bytes.buffer;
                            }
                            const headers = new Headers({ 'content-type': entry.contentType });
                            const response = new Response(responseBody, { headers });
                            await cache.put(entry.url, response);
                        }
                    }
                }
                alert("Data loaded");
            };
            alert("This might take a while, dont touch anything other than this OK button");
            reader.readAsText(file);
        }

        function darkMode() {
            document.body.classList.toggle("dark-mode");
        }

        function cloakIcon(url) {
            const link = document.querySelector("link[rel~='icon']");
            link.rel = "icon";
            if ((url + "").trim().length === 0) {
                link.href = "favicon.png";
            } else {
                link.href = url;
            }
            document.head.appendChild(link);
        }
        
        function cloakName(string) {
            if ((string + "").trim().length === 0) {
                document.title = "Games";
                return;
            }
            document.title = string;
        }

        function tabCloak() {
            closePopup();
            document.getElementById('popupTitle').textContent = "Tab Cloak";
            const popupBody = document.getElementById('popupBody');
            popupBody.innerHTML = `
                <label for="tab-cloak-textbox" style="font-weight: bold;">Set Tab Title:</label><br>
                <input type="text" id="tab-cloak-textbox" placeholder="Enter new tab name..." oninput="cloakName(this.value)">
                <br><br><br><br>
                <label for="tab-cloak-textbox" style="font-weight: bold;">Set Tab Icon:</label><br>
                <input type="text" id="tab-cloak-textbox" placeholder="Enter new tab icon..." oninput='cloakIcon(this.value)'>
                <br><br><br>
            `;
            popupBody.contentEditable = false;
            document.getElementById('popupOverlay').style.display = "flex";
        }

        function showContact() {
            document.getElementById('popupTitle').textContent = "Contact";
            const popupBody = document.getElementById('popupBody');
            popupBody.innerHTML = `
                <p>Discord: https://discord.gg/NAFw4ykZ7n</p>
                <p>Email: gn.math.business@gmail.com</p>
            `;
            popupBody.contentEditable = false;
            document.getElementById('popupOverlay').style.display = "flex";
        }

        function loadPrivacy() {
            document.getElementById('popupTitle').textContent = "Privacy Policy";
            const popupBody = document.getElementById('popupBody');
            popupBody.innerHTML = `
                <div style="max-height: 60vh; overflow-y: auto;">
                    <h2>PRIVACY POLICY</h2>
                    <p>Last updated April 17, 2025</p>
                    <p>This Privacy Notice describes how and why we might access, collect, store, use, and/or share ("process") your personal information when you use our services ("Services").</p>
                    <p>Questions or concerns? Reading this Privacy Notice will help you understand your privacy rights and choices.</p>
                    <h3>SUMMARY OF KEY POINTS</h3>
                    <p>This summary provides key points from our Privacy Notice.</p>
                    <p><strong>What personal information do we process?</strong> When you visit, use, or navigate our Services, we may process personal information depending on how you interact with us and the Services, the choices you make, and the products and features you use.</p>
                    <p><strong>Do we process any sensitive personal information?</strong> We do not process sensitive personal information.</p>
                    <p><strong>Do we collect any information from third parties?</strong> We do not collect any information from third parties.</p>
                    <p><strong>How do we process your information?</strong> We process your information to provide, improve, and administer our Services, communicate with you, for security and fraud prevention, and to comply with law.</p>
                    <p><strong>How do we keep your information safe?</strong> We have adequate organizational and technical processes and procedures in place to protect your personal information.</p>
                    <p><strong>What are your rights?</strong> Depending on where you are located geographically, the applicable privacy law may mean you have certain rights regarding your personal information.</p>
                </div>
            `;
            popupBody.contentEditable = false;
            document.getElementById('popupOverlay').style.display = "flex";
        }

        function loadDMCA() {
            document.getElementById('popupTitle').textContent = "DMCA";
            const popupBody = document.getElementById('popupBody');
            popupBody.innerHTML = `
                <div class="dmca-content">
                    <p>If you own or developed a game on this site and would like it removed, please contact us:</p>
                    <ol>
                        <li>
                            <a href="https://discord.gg/D4c9VFYWyU" target="_blank" rel="noopener noreferrer" style="color: #8fdcff;">
                                Join the Discord
                            </a> and send a direct message
                            <strong>[INSTANT RESPONSE]</strong>
                        </li>
                        <li>
                            Email at 
                            <a href="mailto:gn.math.business@gmail.com" style="color: #8fdcff;">gn.math.business@gmail.com</a> 
                            with the subject starting with <code>!DMCA</code>.
                            <strong>[DELAYED RESPONSE]</strong>
                        </li>
                    </ol>
                    <p>Please provide proof of ownership with your request.</p>
                </div>
            `;
            popupBody.contentEditable = false;
            document.getElementById('popupOverlay').style.display = "flex";
        }

        let _allStatsCache = null;

        async function getAllStats() {
            if (_allStatsCache) {
                return _allStatsCache;
            }

            const BASE_URL = "https://data.jsdelivr.com/v1/stats/packages/gh/gn-math/html@main/files";
            const PERIOD = "year";
            const PAGE_BATCH = 5;

            let page = 1;
            let done = false;
            const combinedMap = Object.create(null);

            while (!done) {
                const pages = Array.from({ length: PAGE_BATCH }, (_, i) => page + i);

                const responses = await Promise.all(
                    pages.map(p =>
                        fetch(`${BASE_URL}?period=${PERIOD}&page=${p}&limit=100`)
                            .then(r => (r.ok ? r.json() : []))
                    )
                );

                for (const data of responses) {
                    if (!Array.isArray(data) || data.length === 0) {
                        done = true;
                        break;
                    }

                    for (const item of data) {
                        if (!item?.name) continue;

                        const match = item.name.match(/^\/(\d+)([.-])/);
                        if (!match) continue;

                        const id = match[1];

                        if (!combinedMap[id]) {
                            combinedMap[id] = { hits: 0, bandwidth: 0 };
                        }

                        combinedMap[id].hits += item.hits?.total ?? 0;
                        combinedMap[id].bandwidth += item.bandwidth?.total ?? 0;
                    }
                }

                page += PAGE_BATCH;
            }

            _allStatsCache = combinedMap;
            return combinedMap;
        }

        async function getStats(id) {
            id = String(id);
            const allStats = await getAllStats();
            return allStats[id]?.hits ?? 0;
        }

        function showZoneInfo() {
            let id = Number(document.getElementById('zoneId').textContent);
            document.getElementById('popupTitle').textContent = "Info";
            const popupBody = document.getElementById('popupBody');
            popupBody.innerHTML = `<p>Loading...</p>`;
            popupBody.contentEditable = false;
            document.getElementById('popupOverlay').style.display = "flex";
            fetch(`https://api.github.com/repos/gn-math/html/commits?path=${id}.html`).then(res => res.json()).then(async json => {
                let stats = await getStats(id);
                let idjson = zones.filter(a => a.id === id)[0];
                document.getElementById('popupTitle').textContent = `${idjson.name} Info`;
                const date = new Date(json.at(-1).commit.author.date);
                let formatteddate = new Intl.DateTimeFormat("en-US", {
                    month: "long",
                    day: "numeric",
                    year: "numeric",
                    hour: "numeric",
                    minute: "2-digit",
                    hour12: true
                }).format(date);
                popupBody.innerHTML = `
                    <p>
                        <b>Id</b>: ${id}<br>
                        <b>Name</b>: ${idjson.name}<br>
                        ${idjson.author ? `<b>Game Author</b>: ${idjson.author}<br>` : ""}
                        ${idjson.authorLink ? `<b>Game Author Link</b>: <a style="color:#8fdcff;" href=${idjson.authorLink}>${idjson.authorLink}</a><br>` : ""}
                        ${idjson.special ? `<b>Tags</b>: ${idjson.special}<br>` : ""}
                        <b>Date Added</b>: ${formatteddate}<br>
                        <b>Times Played (Globally)</b>: ${Number(stats).toLocaleString("en-US")}
                    </p>
                `;
            });
        }

        function closePopup() {
            document.getElementById('popupOverlay').style.display = "none";
        }
        
        listZones();

        const schoolList = ["deledao", "goguardian", "lightspeed", "linewize", "securly", ".edu/"];

        function isBlockedDomain(url) {
            const domain = new URL(url, location.origin).hostname + "/";
            return schoolList.some(school => domain.includes(school));
        }

        const originalFetch = window.fetch;
        window.fetch = function (url, options) {
            if (isBlockedDomain(url)) {
                console.warn(`lam`);
                return Promise.reject(new Error("lam"));
            }
            return originalFetch.apply(this, arguments);
        };

        const originalOpen = XMLHttpRequest.prototype.open;
        XMLHttpRequest.prototype.open = function (method, url) {
            if (isBlockedDomain(url)) {
                console.warn(`lam`);
                return;
            }
            return originalOpen.apply(this, arguments);
        };

        HTMLCanvasElement.prototype.toDataURL = function (...args) {
            return "";
        };
    </script>
    <script>
        const search = new URLSearchParams(window.location.search);
        const privacy = search.get('privacy');
        if (privacy) {
            loadPrivacy();
        }
    </script>
    <script>
        navigator.serviceWorker.register(location.protocol + "//" + location.hostname + "/sw.js");
    </script>
    <script>
document.addEventListener("DOMContentLoaded", () => {
  const select = document.getElementById("background-select");
  const upload = document.getElementById("background-upload");
  const body = document.body;

  // Apply background
  function setBackground(src) {
    body.style.backgroundImage = src ? `url(${src})` : "";
    localStorage.setItem("selectedBackground", src || "");
  }

  // Load saved background
  const savedBg = localStorage.getItem("selectedBackground");
  if (savedBg) setBackground(savedBg);

  // Dropdown change
  select.addEventListener("change", () => {
    if (select.value) {
      setBackground(select.value);
    }
  });

  // Upload custom background
  upload.addEventListener("change", () => {
    const file = upload.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = () => {
      setBackground(reader.result); // base64 image
      select.value = ""; // reset dropdown
    };
    reader.readAsDataURL(file);
  });
});
</script>
</body>
</html>